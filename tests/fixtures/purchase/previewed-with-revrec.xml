POST https://api.recurly.com/v2/purchases/preview HTTP/1.1
X-Api-Version: {api-version}
Accept: application/xml
Authorization: Basic YXBpa2V5Og==
User-Agent: {user-agent}
Content-Type: application/xml; charset=utf-8

<?xml version="1.0" encoding="UTF-8"?>
<purchase>
    <account>
      <account_code>testmock</account_code>
    </account>
    <adjustments>
      <adjustment>
        <liability_gl_account_id>t5ejtge1xw0x</liability_gl_account_id>
        <performance_obligation_id>5</performance_obligation_id>
        <revenue_gl_account_id>t5ejtgf1vxh1</revenue_gl_account_id>
        <unit_amount_in_cents type="integer">500</unit_amount_in_cents>
      </adjustment>
    </adjustments>
    <currency>USD</currency>
</purchase>

HTTP/1.1 200 OK
Content-Type: application/xml; charset=utf-8

<?xml version="1.0" encoding="UTF-8"?>
<invoice_collection>
  <charge_invoice>
    <account href="https://api.recurly.com/v2/accounts/testmock"/>
    <dunning_campaign_id nil="nil"></dunning_campaign_id>
    <business_entity href="https://api.recurly.com/v2/business_entities/t58pm17a74k6"/>
    <address>
      <name_on_account nil="nil"></name_on_account>
      <first_name>test</first_name>
      <last_name>mock</last_name>
      <company></company>
      <address1>test</address1>
      <address2></address2>
      <city>San Francisco</city>
      <state>CA</state>
      <zip>94016</zip>
      <country>US</country>
      <phone></phone>
    </address>
    <uuid>6f46fd3a6fd7188696e66746c7af73a2</uuid>
    <state>pending</state>
    <invoice_number_prefix></invoice_number_prefix>
    <invoice_number nil="nil"></invoice_number>
    <vat_number></vat_number>
    <tax_in_cents type="integer">51</tax_in_cents>
    <total_in_cents type="integer">551</total_in_cents>
    <currency>USD</currency>
    <created_at nil="nil"></created_at>
    <updated_at nil="nil"></updated_at>
    <attempt_next_collection_at type="datetime">2024-02-23T22:59:30Z</attempt_next_collection_at>
    <closed_at nil="nil"></closed_at>
    <customer_notes nil="nil"></customer_notes>
    <recovery_reason nil="nil"></recovery_reason>
    <gateway_code nil="nil"></gateway_code>
    <subtotal_before_discount_in_cents type="integer">500</subtotal_before_discount_in_cents>
    <subtotal_in_cents type="integer">500</subtotal_in_cents>
    <discount_in_cents type="integer">0</discount_in_cents>
    <due_on type="datetime">2024-02-23T22:59:30Z</due_on>
    <balance_in_cents type="integer">551</balance_in_cents>
    <type>charge</type>
    <origin>purchase</origin>
    <refundable_total_in_cents type="integer">551</refundable_total_in_cents>
    <credit_payments type="array">
    </credit_payments>
    <net_terms type="integer">0</net_terms>
    <collection_method>automatic</collection_method>
    <po_number nil="nil"></po_number>
    <terms_and_conditions nil="nil"></terms_and_conditions>
    <tax_type>usst</tax_type>
    <tax_region>CA</tax_region>
    <tax_rate type="float">0.1025</tax_rate>
    <used_tax_service type="boolean">true</used_tax_service>
    <line_items type="array">
      <adjustment type="charge">
        <account href="https://api.recurly.com/v2/accounts/testmock"/>
        <bill_for_account href="https://api.recurly.com/v2/accounts/testmock"/>
        <item_code nil="nil"></item_code>
        <external_sku nil="nil"></external_sku>
        <refundable_total_in_cents type="integer">551</refundable_total_in_cents>
        <uuid>6f46fd391c157c3e20bb8d4ab78587bd</uuid>
        <state>pending</state>
        <description nil="nil"></description>
        <accounting_code nil="nil"></accounting_code>
        <product_code nil="nil"></product_code>
        <origin>debit</origin>
        <unit_amount_in_cents type="integer">500</unit_amount_in_cents>
        <quantity type="integer">1</quantity>
        <discount_in_cents type="integer">0</discount_in_cents>
        <tax_in_cents type="integer">51</tax_in_cents>
        <total_in_cents type="integer">551</total_in_cents>
        <tax_inclusive type="boolean">false</tax_inclusive>
        <currency>USD</currency>
        <proration_rate nil="nil"></proration_rate>
        <tax_type>usst</tax_type>
        <tax_region>CA</tax_region>
        <tax_rate type="float">0.1025</tax_rate>
        <tax_exempt type="boolean">false</tax_exempt>
        <tax_code nil="nil"></tax_code>
        <start_date type="datetime">2024-02-23T22:59:30Z</start_date>
        <end_date nil="nil"></end_date>
        <created_at nil="nil"></created_at>
        <updated_at nil="nil"></updated_at>
        <revenue_schedule_type></revenue_schedule_type>
        <custom_fields type="array">
        </custom_fields>
        <liability_gl_account_code>firstliab</liability_gl_account_code>
        <revenue_gl_account_code>firstrev</revenue_gl_account_code>
        <performance_obligation_id>5</performance_obligation_id>
      </adjustment>
    </line_items>
    <transactions type="array">
    </transactions>
  </charge_invoice>
  <credit_invoices type="array">
  </credit_invoices>
</invoice_collection>
